<%- include('../includes/header.ejs') %>
    <link rel="stylesheet" href="/css/projects.css">

    </head>

    <body>
        <% const money = new Intl.NumberFormat('en-US', {style: 'currency',currency: 'USD',minimumFractionDigits: 2}); %>
            <% const percent = new Intl.NumberFormat('en-US', {style: 'percent',minimumFractionDigits: 1}); %>
                <%- include('../includes/navigation.ejs') %>
                    <main>
                        <div class="centered">
                            <h1><strong>Owner Out of Pocket</strong></h1>
                        </div>
                        <article class="notes">
                            <form class="form" action="/ownerOop" method="POST">
                                <div class="row">

                                    <div class="col-sm">
                                        <label for="projectId"><strong>Project Id: </strong></label>
                                        <input type="text" name="projectId" id="projectId" value="<%= projId %>">
                                    </div>
                                    <div class="col-sm">
                                        <label for="entryDate"><strong>Entered On: </strong></label>
                                        <input type="datetime" name="entryDate" id="entryDate" value="<%= new Date() %>">
                                    </div>
                                    <div class="col-sm">
                                        <label for="enteredBy"><strong>Entered By: </strong></label>
                                        <input type="text" name="enteredBy" id="enteredBy" value="<%= userName %>">
                                        <input type="hidden" name="enteredID" value="<%= userId %>">
                                    </div>
                                    <div class="col-sm" style="width: 200px">
                                        <label for="tradeName"><strong>Trade: </strong></label>
                                        <select style="width: 200px" class="select" name="tradeName" id="tradeName">
                                    <% for (let trades of trade) { %>
                                    <option value="<%= trades.id %>">
                                    <%= trades.trade %></option>
                                    <% } %>
                                </select>
                                    </div>
                                    <div class="col-sm">
                                        <label for="oopMemo"><strong>Description: </strong></label>
                                        <textarea cols="50" rows="1" type="text" name="oopMemo" id="oopMemo"></textarea>
                                    </div>
                                    <div class="col-sm">
                                        <label for="oopAmt"><strong>Amount: </strong></label>
                                        <input type="currency" name="oopAmt" id="oopAmt">
                                    </div>
                                </div>
                                <br>
                                <div class="row">
                                    <br>
                                    <input type="hidden" name="_csrf" value="<%= csrfToken %>">
                                    <button class="btn-sm text-center" style="width: 125px" type="submit"> Add Funds</button>
                                    <br>
                                    <a class="btn-sm text-center" style="width: 150px" href="/project/<%= project.id %>">Back to FinancialInfo</a>
                                </div>
                            </form><br>
                        </article>
                        <br>
                        <br>
                        <br>
                        <article class="notes">
                            <strong><div class="row">
                                <div class="col-sm">
                                    Entered By
                                </div>
                                <div class="col-sm">
                                    Date Entered
                                </div>
                                <div class="col-sm">
                                    Trade
                                </div>
                                <div class="col-sm">
                                    Description
                                </div>
                                <div class="col-sm">
                                    Amount
                                </div>
                            </div></strong>
                            <% for (let oop of oops) { %>
                                <div class="row">
                                    <div class="col-sm">
                                        <%= oop.enteredBy %>
                                    </div>
                                    <div class="col-sm">
                                        <%= oop.entryDate %>
                                    </div>
                                    <div class="col-sm">
                                        <%= oop.tradeName %>
                                    </div>
                                    <div class="col-sm">
                                        <%= money.format(oop.oopAmt) %>
                                            <% project.totalOwnerOop %>
                                    </div>
                                    <div class="col-sm">
                                        <%= oop.oopMemo %>
                                    </div>

                                </div>
                                <% } %>
                                    <br>
                                    <article>
                                        <div class="row">
                                            <div class="col-sm">
                                                <%= money.format(project.totalOwnerOop) %>
                                            </div>
                                        </div>
                                    </article>


                        </article>


                    </main>

                    <%- include('../includes/footer.ejs') %>
                        <script src="/js/status.js"></script>